Оформление кода в Go
====================

Выполняйте gofmt после сохранения, чтобы автоматически устранить 
большинство проблем механического типа. Почти весь Go-код использует gofmt.


## Комментарии

См. [https://golang.org/doc/effective_go.html#commentary.](https://golang.org/doc/effective_go.html#commentary.) 
Комментарии документирующие функции, структуры или пакеты должны быть 
полными предложениями, даже если это кажется немного излишним. 
Такой подход дает возможность извлечения их при использовании 
godoc для генерации документации. 

``` go 
// Request represents a request to run a command.
type Request struct { ...

// Encode writes the JSON encoding of req to w.
func Encode(w io.Writer, req *Request) { ...
```



## Объявление пустых срезов

При объявлении среза, используйте

``` go
var t []string
```

вместо

``` go
t := []string{}
```

Это позволяет избегать лишнего выделения памяти, если срез 
никогда не добавится.

## Ошибки

См. [https://golang.org/doc/effective_go.html#errors](https://golang.org/doc/effective_go.html#errors)

Не обрабатывайте ошибки с помощью `_`. Если функция возвращает ошибку, 
проверьте её, чтобы убедиться, что функция завершилась успешно. 
Обрабатайте ошибку и вернуть её или в действительно исключительных 
ситуациях вызоовите panic.

Не используйте panic для нормальной обработки ошибок. 
Используйте error и несколько возвращаемых значений.

Строки ошибок не должны начитаться с заглавной буквы 
(за исключением случаев, когда предложение начинаеться с имен собственных или аббревиатур) 
или заканчиваться знаками препинания, так как они обычно печатаются в другом контексте.

То есть используйте `fmt.Errorf("something bad")` вместо `fmt.Errorf("Something bad")` 
так же как `log.Print("Reading %s: %v", filename, err)`. 
Это правило не относится к логированию. 

## Импорт 

Импорт организован в группы, с пустыми строками между ними. 
Стандартные пакеты находятся в первой группе. 
Используйте для этого goimports.

Импорт с использованием `.` может быть полезен при написании тестов 
для решения циклических зависимостей:

``` go
package foo_test

import (
  "bar/testutil" // так же импортирует "foo"
  . "foo"
)
```

## Оформление обработки ошибок

Используйте вместо 

``` go
 if err != nil {
     // error handling
 } else {
     // normal code
 }
```

такой код 

``` go
if err != nil {
    // error handling
    return // or continue, etc.
}
// normal code
```

Если если функция возращает несколько значений, например:

``` go
if x, err := f(); err != nil {
    // error handling
    return
} else {
    // use x
}
```


вы можете вынести объявление `x, err := f()` в отдельную строку

``` go
x, err := f()
if err != nil {
    // error handling
    return
}
// use x
```

## Аббревиатуры

Слова в именах, которые являются аббревиатурами (например, "URL" или "НАТО"), 
должены выглядеть как "URL" или "url" ("urlPony", или "URLPony"), никогда не как "Url". 
Например: не ServeHttp, а ServeHTTP.

## Длина строки кода

Комментарии, как правило, содержат не более 80 символов в строке, 
не потому, что это правило, а потому, что это более читаемо при просмотре на небольших экранах

Но не добавляйте разрывы строк, чтобы держать линии короткими, 
когда они более читаемым если длинные.